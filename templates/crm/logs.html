{% extends 'crm/base.html' %}
{% load static %}

{% block crm %}
    <div class="card-header">
        <div class="w-100 d-flex">
            <div class="w-50"></div>
            <div class="w-50 d-flex flex-wrap justify-content-end">
                <button onclick="crm.newLog()" style="margin-right: .2rem" class="btn btn-primary">NEW</button>
                <button onclick="crm.uploadCsvScreen()" style="margin-right: .2rem" class="btn btn-info">UPLOAD</button>
                {%  if user.request.is_superuser %}
                <button onclick="crm.generateReports()" class="btn btn-warning">GENERATE REPORT</button>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="card-body overflow-hidden">

        <table class="table datatable">
            <thead>
                <tr>
                    <th>COMPANY</th><th>CONTACT PERSON</th><th>CONTACT</th><th>DATE</th><th>FLAG</th><th>action</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                    <tr>
                        <td><small>{{ log.company }}</small></td>
                        <td><small>{{ log.customer }} <br>{{ log.position }}</small></td>
                        <td><i class="bx bx-phone"></i> <small>{{ log.phone }}</small> <br> <i class="bx bxs-inbox"></i> <small>{{ log.email }}</small></td>
                        <td><small>{{ log.created_date }}</small> <br><small>{{ log.created_time }}</small></td>
                        <td><i class="text-{{ log.success }}">{{ log.success }}</i></td>
                        <td><i onclick="Swal.fire({title:`{{ log.subject }}`,
                        text:`{{ log.description }}`
                        })" class="fa fa-eye text-info"></i></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script src="{% static 'general/js/classes/crm.js' %}"></script>
{% endblock %}